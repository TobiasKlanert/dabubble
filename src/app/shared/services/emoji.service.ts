import {
    Injectable,
    ElementRef,
    ViewChild,
    HostListener
} from "@angular/core";

@Injectable({
    providedIn: 'root'
})

export class EmojiService {
    emojis: any = {
        "smileys": [
            "ğŸ˜€", "ğŸ˜ƒ", "ğŸ˜„", "ğŸ˜", "ğŸ˜†", "ğŸ˜…", "ğŸ˜‚", "ğŸ¤£", "ğŸ˜Š", "ğŸ˜‡",
            "ğŸ™‚", "ğŸ™ƒ", "ğŸ˜‰", "ğŸ˜Œ", "ğŸ˜", "ğŸ¥°", "ğŸ˜˜", "ğŸ˜—", "ğŸ˜™", "ğŸ˜š",
            "ğŸ˜‹", "ğŸ˜œ", "ğŸ˜", "ğŸ˜›", "ğŸ¤‘", "ğŸ¤—", "ğŸ¤­", "ğŸ¤«", "ğŸ¤”", "ğŸ¤",
            "ğŸ¤¨", "ğŸ˜", "ğŸ˜‘", "ğŸ˜¶", "ğŸ˜", "ğŸ˜’", "ğŸ™„", "ğŸ˜¬", "ğŸ˜®â€ğŸ’¨", "ğŸ¤¥",
            "ğŸ˜Œ", "ğŸ˜”", "ğŸ˜ª", "ğŸ¤¤", "ğŸ˜´", "ğŸ˜·", "ğŸ¤’", "ğŸ¤•", "ğŸ¤¢", "ğŸ¤®"
        ],
        "tiere": [
            "ğŸ¶", "ğŸ±", "ğŸ­", "ğŸ¹", "ğŸ°", "ğŸ¦Š", "ğŸ»", "ğŸ¼", "ğŸ¨", "ğŸ¯",
            "ğŸ¦", "ğŸ®", "ğŸ·", "ğŸ¸", "ğŸµ", "ğŸ”", "ğŸ§", "ğŸ¦", "ğŸ¤", "ğŸ£",
            "ğŸ¥", "ğŸ¦†", "ğŸ¦…", "ğŸ¦‰", "ğŸ¦‡", "ğŸº", "ğŸ—", "ğŸ´", "ğŸ¦„", "ğŸ",
            "ğŸ›", "ğŸ¦‹", "ğŸŒ", "ğŸš", "ğŸ", "ğŸœ", "ğŸ•·ï¸", "ğŸ¦‚", "ğŸ¢", "ğŸ",
            "ğŸ¦", "ğŸ¦–", "ğŸ¦•", "ğŸ™", "ğŸ¦‘", "ğŸ¦", "ğŸ¦", "ğŸ¦€", "ğŸ¡", "ğŸ "
        ],
        "essen": [
            "ğŸ", "ğŸ", "ğŸ", "ğŸŠ", "ğŸ‹", "ğŸŒ", "ğŸ‰", "ğŸ‡", "ğŸ“", "ğŸˆ",
            "ğŸ’", "ğŸ‘", "ğŸ¥­", "ğŸ", "ğŸ¥¥", "ğŸ¥", "ğŸ…", "ğŸ†", "ğŸ¥‘", "ğŸ¥¦",
            "ğŸ¥¬", "ğŸ¥’", "ğŸŒ¶ï¸", "ğŸŒ½", "ğŸ¥•", "ğŸ¥”", "ğŸ ", "ğŸ¥", "ğŸ", "ğŸ¥–",
            "ğŸ¥¨", "ğŸ¥¯", "ğŸ§€", "ğŸ–", "ğŸ—", "ğŸ¥©", "ğŸ¥“", "ğŸ”", "ğŸŸ", "ğŸ•",
            "ğŸŒ­", "ğŸ¥ª", "ğŸŒ®", "ğŸŒ¯", "ğŸ¥™", "ğŸ§†", "ğŸ¥š", "ğŸ³", "ğŸ¥˜", "ğŸ²"
        ],
        "aktivitÃ¤t": [
            "âš½", "ğŸ€", "ğŸˆ", "âš¾", "ğŸ¾", "ğŸ", "ğŸ‰", "ğŸ¥", "ğŸ±", "ğŸ“",
            "ğŸ¸", "ğŸ¥…", "ğŸ’", "ğŸ‘", "ğŸ", "â›³", "ğŸ¹", "ğŸ£", "ğŸ¥Š", "ğŸ¥‹",
            "ğŸ½", "ğŸ›¹", "ğŸ›¼", "ğŸ›·", "â›¸ï¸", "ğŸ¥Œ", "ğŸ¿", "â›·ï¸", "ğŸ‚", "ğŸ‹ï¸â€â™‚ï¸"
        ],
        "reisen": [
            "ğŸš—", "ğŸš•", "ğŸš™", "ğŸšŒ", "ğŸš", "ğŸï¸", "ğŸš“", "ğŸš‘", "ğŸš’", "ğŸš",
            "ğŸ›»", "ğŸšš", "ğŸš›", "ğŸšœ", "ğŸ›´", "ğŸš²", "ğŸ›µ", "ğŸï¸", "ğŸ›º", "ğŸš¨",
            "ğŸš", "ğŸ›©ï¸", "âœˆï¸", "ğŸ›«", "ğŸ›¬", "ğŸš€", "ğŸ›¸", "ğŸš¡", "ğŸš ", "ğŸšŸ",
            "ğŸšƒ", "ğŸš‹", "ğŸš", "ğŸš", "ğŸš„", "ğŸš…", "ğŸšˆ", "ğŸš‚", "ğŸš†", "ğŸš‡"
        ],
        "objekte": [
            "âŒš", "ğŸ“±", "ğŸ“²", "ğŸ’»", "âŒ¨ï¸", "ğŸ–¥ï¸", "ğŸ–¨ï¸", "ğŸ–±ï¸", "ğŸ–²ï¸", "ğŸ•¹ï¸",
            "ğŸ—œï¸", "ğŸ’½", "ğŸ’¾", "ğŸ’¿", "ğŸ“€", "ğŸ“¼", "ğŸ“·", "ğŸ“¸", "ğŸ“¹", "ğŸ¥",
            "ğŸ“½ï¸", "ğŸï¸", "ğŸ“", "â˜ï¸", "ğŸ“Ÿ", "ğŸ“ ", "ğŸ“º", "ğŸ“»", "ğŸ™ï¸", "ğŸšï¸"
        ],
        "symbole": [
            "â¤ï¸", "ğŸ§¡", "ğŸ’›", "ğŸ’š", "ğŸ’™", "ğŸ’œ", "ğŸ–¤", "ğŸ¤", "ğŸ¤",
            "ğŸ’”", "â£ï¸", "ğŸ’•", "ğŸ’", "ğŸ’“", "ğŸ’—", "ğŸ’–", "ğŸ’˜", "ğŸ’",
            "ğŸ””", "ğŸ”•", "ğŸµ", "ğŸ¶", "âš ï¸", "ğŸš¸", "ğŸ”", "â˜¢ï¸", "â˜£ï¸", "â¬†ï¸",
            "â¬‡ï¸", "â¬…ï¸", "â¡ï¸", "â†—ï¸", "â†˜ï¸", "â†™ï¸", "â†–ï¸", "ğŸ”„", "ğŸ”", "ğŸ”€"
        ],
    }
    activeEmojiCategory: string = 'Smiley';
    showEmojiPicker = true;

    constructor() { }

    @ViewChild('emojiPicker') emojiPicker!: ElementRef<HTMLElement>;

    selectEmojiCategory(category: string) {
        this.activeEmojiCategory = category;
    }

    get displayedEmojis(): string[] {
        return this.emojis[this.activeEmojiCategory] || this.emojis["smileys"];
    }

    toggleEmojiPicker() {
      this.showEmojiPicker = !this.showEmojiPicker;
    }

    @HostListener('document:click', ['$event'])
    onOutsideClick(event: MouseEvent) {
        if (this.showEmojiPicker &&
            this.emojiPicker &&
            !this.emojiPicker.nativeElement.contains(event.target as Node)) {
            this.showEmojiPicker = false
        }
    }
}